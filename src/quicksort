#include <stdio.h>
#include <stdio.h>
#include "quicksort.h"  

static void qos(int arr[],int l,int r,State* state)
{
    if(r > l)
    {
        int pivot = arr[r];
        int i = l - 1;
        int j = r;
        int temp;

        while(1)
        {
            while(arr[++i] < pivot);
            while(arr[--j] > pivot);

            if(i >= j) break;

            temp = arr[i]; arr[i] = arr[j]; arr[j] = temp;
        }
        
        temp = arr[i]; arr[i] = arr[r]; arr[r] = temp;

        SDL_FillRect(state->buffer_surface,NULL,WHITE);
        drawRuler(state->buffer_surface,RED,GAP);
        drawBars(state->buffer_surface,SANDY,arr,10);

        updateStateSurface(state);

        qos(arr,i+1,r,state);
        qos(arr,l,i-1,state);
    }
}

void quicksort(int arr[],int len,State* state)
{
    qos(arr,0,len-1,state);
}

